import{r,j as h}from"./react-cNyXNeAR.js";import{c as _,s as Q,o as ve,a as K,l as Y,b as Z}from"./dom-helpers-CRQpUKSM.js";import{R as Re}from"./react-dom-BVY8cs61.js";const ee=e=>!e||typeof e=="function"?e:n=>{e.current=n};function xe(e,n){const t=ee(e),o=ee(n);return i=>{t&&t(i),o&&o(i)}}function $(e,n){return r.useMemo(()=>xe(e,n),[e,n])}function ye(e){const n=r.useRef(e);return r.useEffect(()=>{n.current=e},[e]),n}function b(e){const n=ye(e);return r.useCallback(function(...t){return n.current&&n.current(...t)},[n])}function tn(){return r.useState(null)}function we(){const e=r.useRef(!0),n=r.useRef(()=>e.current);return r.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),n.current}function Oe(e){const n=r.useRef(null);return r.useEffect(()=>{n.current=e}),n.current}const ke=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Ce=typeof document<"u",ne=Ce||ke?r.useLayoutEffect:r.useEffect,Te=["as","disabled"];function je(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}function Me(e){return!e||e.trim()==="#"}function De({tagName:e,disabled:n,href:t,target:o,rel:i,role:s,onClick:a,tabIndex:m=0,type:d}){e||(t!=null||o!=null||i!=null?e="a":e="button");const c={tagName:e};if(e==="button")return[{type:d||"button",disabled:n},c];const E=f=>{if((n||e==="a"&&Me(t))&&f.preventDefault(),n){f.stopPropagation();return}a==null||a(f)},g=f=>{f.key===" "&&(f.preventDefault(),E(f))};return e==="a"&&(t||(t="#"),n&&(t=void 0)),[{role:s??"button",disabled:void 0,tabIndex:n?void 0:m,href:t,target:e==="a"?o:void 0,"aria-disabled":n||void 0,rel:e==="a"?i:void 0,onClick:E,onKeyDown:g},c]}const Be=r.forwardRef((e,n)=>{let{as:t,disabled:o}=e,i=je(e,Te);const[s,{tagName:a}]=De(Object.assign({tagName:t,disabled:o},i));return h.jsx(a,Object.assign({},i,s,{ref:n}))});Be.displayName="Button";function Pe(e){const n=r.useRef(e);return n.current=e,n}function We(e){const n=Pe(e);r.useEffect(()=>()=>n.current(),[])}const Fe="data-rr-ui-";function Se(e){return`${Fe}${e}`}const re=r.createContext(_?window:void 0);re.Provider;function G(){return r.useContext(re)}function Le(e=document){const n=e.defaultView;return Math.abs(n.innerWidth-e.documentElement.clientWidth)}const te=Se("modal-open");class ie{constructor({ownerDocument:n,handleContainerOverflow:t=!0,isRTL:o=!1}={}){this.handleContainerOverflow=t,this.isRTL=o,this.modals=[],this.ownerDocument=n}getScrollbarWidth(){return Le(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(n){}removeModalAttributes(n){}setContainerStyle(n){const t={overflow:"hidden"},o=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();n.style={overflow:i.style.overflow,[o]:i.style[o]},n.scrollBarWidth&&(t[o]=`${parseInt(Q(i,o)||"0",10)+n.scrollBarWidth}px`),i.setAttribute(te,""),Q(i,t)}reset(){[...this.modals].forEach(n=>this.remove(n))}removeContainerStyle(n){const t=this.getElement();t.removeAttribute(te),Object.assign(t.style,n.style)}add(n){let t=this.modals.indexOf(n);return t!==-1||(t=this.modals.length,this.modals.push(n),this.setModalAttributes(n),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(n){const t=this.modals.indexOf(n);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(n))}isTopModal(n){return!!this.modals.length&&this.modals[this.modals.length-1]===n}}const H=(e,n)=>_?e==null?(n||ve()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function Ae(e,n){const t=G(),[o,i]=r.useState(()=>H(e,t==null?void 0:t.document));if(!o){const s=H(e);s&&i(s)}return r.useEffect(()=>{},[n,o]),r.useEffect(()=>{const s=H(e);s!==o&&i(s)},[e,o]),o}function Ie({children:e,in:n,onExited:t,mountOnEnter:o,unmountOnExit:i}){const s=r.useRef(null),a=r.useRef(n),m=b(t);r.useEffect(()=>{n?a.current=!0:m(s.current)},[n,m]);const d=$(s,e.ref),c=r.cloneElement(e,{ref:d});return n?c:i||!a.current&&o?null:c}function Ke(e){return e.code==="Escape"||e.keyCode===27}function He(){const e=r.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}const Ue=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function _e(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}function $e(e){let{onEnter:n,onEntering:t,onEntered:o,onExit:i,onExiting:s,onExited:a,addEndListener:m,children:d}=e,c=_e(e,Ue);const{major:E}=He(),g=E>=19?d.props.ref:d.ref,f=r.useRef(null),y=$(f,typeof d=="function"?null:g),p=v=>R=>{v&&f.current&&v(f.current,R)},T=r.useCallback(p(n),[n]),j=r.useCallback(p(t),[t]),M=r.useCallback(p(o),[o]),D=r.useCallback(p(i),[i]),w=r.useCallback(p(s),[s]),B=r.useCallback(p(a),[a]),P=r.useCallback(p(m),[m]);return Object.assign({},c,{nodeRef:f},n&&{onEnter:T},t&&{onEntering:j},o&&{onEntered:M},i&&{onExit:D},s&&{onExiting:w},a&&{onExited:B},m&&{addEndListener:P},{children:typeof d=="function"?(v,R)=>d(v,Object.assign({},R,{ref:y})):r.cloneElement(d,{ref:y})})}const Ge=["component"];function Ne(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}const Ve=r.forwardRef((e,n)=>{let{component:t}=e,o=Ne(e,Ge);const i=$e(o);return h.jsx(t,Object.assign({ref:n},i))});function ze({in:e,onTransition:n}){const t=r.useRef(null),o=r.useRef(!0),i=b(n);return ne(()=>{if(!t.current)return;let s=!1;return i({in:e,element:t.current,initial:o.current,isStale:()=>s}),()=>{s=!0}},[e,i]),ne(()=>(o.current=!1,()=>{o.current=!0}),[]),t}function Xe({children:e,in:n,onExited:t,onEntered:o,transition:i}){const[s,a]=r.useState(!n);n&&s&&a(!1);const m=ze({in:!!n,onTransition:c=>{const E=()=>{c.isStale()||(c.in?o==null||o(c.element,c.initial):(a(!0),t==null||t(c.element)))};Promise.resolve(i(c)).then(E,g=>{throw c.in||a(!0),g})}}),d=$(m,e.ref);return s&&!n?null:r.cloneElement(e,{ref:d})}function oe(e,n,t){return e?h.jsx(Ve,Object.assign({},t,{component:e})):n?h.jsx(Xe,Object.assign({},t,{transition:n})):h.jsx(Ie,Object.assign({},t))}const qe=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Je(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}let U;function Qe(e){return U||(U=new ie({ownerDocument:e==null?void 0:e.document})),U}function Ye(e){const n=G(),t=e||Qe(n),o=r.useRef({dialog:null,backdrop:null});return Object.assign(o.current,{add:()=>t.add(o.current),remove:()=>t.remove(o.current),isTopModal:()=>t.isTopModal(o.current),setDialogRef:r.useCallback(i=>{o.current.dialog=i},[]),setBackdropRef:r.useCallback(i=>{o.current.backdrop=i},[])})}const se=r.forwardRef((e,n)=>{let{show:t=!1,role:o="dialog",className:i,style:s,children:a,backdrop:m=!0,keyboard:d=!0,onBackdropClick:c,onEscapeKeyDown:E,transition:g,runTransition:f,backdropTransition:y,runBackdropTransition:p,autoFocus:T=!0,enforceFocus:j=!0,restoreFocus:M=!0,restoreFocusOptions:D,renderDialog:w,renderBackdrop:B=u=>h.jsx("div",Object.assign({},u)),manager:P,container:v,onShow:R,onHide:N=()=>{},onExit:ue,onExited:V,onExiting:ce,onEnter:ae,onEntering:le,onEntered:de}=e,fe=Je(e,qe);const x=G(),O=Ae(v),l=Ye(P),me=we(),he=Oe(t),[W,z]=r.useState(!t),k=r.useRef(null);r.useImperativeHandle(n,()=>l,[l]),_&&!he&&t&&(k.current=K(x==null?void 0:x.document)),t&&W&&z(!1);const X=b(()=>{if(l.add(),L.current=Y(document,"keydown",ge),S.current=Y(document,"focus",()=>setTimeout(Ee),!0),R&&R(),T){var u,J;const I=K((u=(J=l.dialog)==null?void 0:J.ownerDocument)!=null?u:x==null?void 0:x.document);l.dialog&&I&&!Z(l.dialog,I)&&(k.current=I,l.dialog.focus())}}),F=b(()=>{if(l.remove(),L.current==null||L.current(),S.current==null||S.current(),M){var u;(u=k.current)==null||u.focus==null||u.focus(D),k.current=null}});r.useEffect(()=>{!t||!O||X()},[t,O,X]),r.useEffect(()=>{W&&F()},[W,F]),We(()=>{F()});const Ee=b(()=>{if(!j||!me()||!l.isTopModal())return;const u=K(x==null?void 0:x.document);l.dialog&&u&&!Z(l.dialog,u)&&l.dialog.focus()}),pe=b(u=>{u.target===u.currentTarget&&(c==null||c(u),m===!0&&N())}),ge=b(u=>{d&&Ke(u)&&l.isTopModal()&&(E==null||E(u),u.defaultPrevented||N())}),S=r.useRef(),L=r.useRef(),be=(...u)=>{z(!0),V==null||V(...u)};if(!O)return null;const q=Object.assign({role:o,ref:l.setDialogRef,"aria-modal":o==="dialog"?!0:void 0},fe,{style:s,className:i,tabIndex:-1});let A=w?w(q):h.jsx("div",Object.assign({},q,{children:r.cloneElement(a,{role:"document"})}));A=oe(g,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:ue,onExiting:ce,onExited:be,onEnter:ae,onEntering:le,onEntered:de,children:A});let C=null;return m&&(C=B({ref:l.setBackdropRef,onClick:pe}),C=oe(y,p,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:C})),h.jsx(h.Fragment,{children:Re.createPortal(h.jsxs(h.Fragment,{children:[C,A]}),O)})});se.displayName="Modal";const on=Object.assign(se,{Manager:ie});export{on as B,ie as M,De as a,b,tn as c,We as d,$ as u};
