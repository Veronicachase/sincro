var $=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},It={exports:{}};(function(e,t){var r=200,n="__lodash_hash_undefined__",o=9007199254740991,s="[object Arguments]",c="[object Array]",l="[object Boolean]",h="[object Date]",f="[object Error]",g="[object Function]",R="[object GeneratorFunction]",X="[object Map]",le="[object Number]",bt="[object Object]",fe="[object Promise]",de="[object RegExp]",Z="[object Set]",he="[object String]",pe="[object Symbol]",At="[object WeakMap]",ge="[object ArrayBuffer]",tt="[object DataView]",ye="[object Float32Array]",me="[object Float64Array]",_e="[object Int8Array]",ve="[object Int16Array]",we="[object Int32Array]",be="[object Uint8Array]",Ae="[object Uint8ClampedArray]",Oe="[object Uint16Array]",Te="[object Uint32Array]",un=/[\\^$.*+?()[\]{}|]/g,cn=/\w*$/,ln=/^\[object .+?Constructor\]$/,fn=/^(?:0|[1-9]\d*)$/,m={};m[s]=m[c]=m[ge]=m[tt]=m[l]=m[h]=m[ye]=m[me]=m[_e]=m[ve]=m[we]=m[X]=m[le]=m[bt]=m[de]=m[Z]=m[he]=m[pe]=m[be]=m[Ae]=m[Oe]=m[Te]=!0,m[f]=m[g]=m[At]=!1;var dn=typeof $=="object"&&$&&$.Object===Object&&$,hn=typeof self=="object"&&self&&self.Object===Object&&self,S=dn||hn||Function("return this")(),Se=t&&!t.nodeType&&t,Ee=Se&&!0&&e&&!e.nodeType&&e,pn=Ee&&Ee.exports===Se;function gn(i,a){return i.set(a[0],a[1]),i}function yn(i,a){return i.add(a),i}function mn(i,a){for(var u=-1,d=i?i.length:0;++u<d&&a(i[u],u,i)!==!1;);return i}function _n(i,a){for(var u=-1,d=a.length,v=i.length;++u<d;)i[v+u]=a[u];return i}function Ce(i,a,u,d){for(var v=-1,w=i?i.length:0;++v<w;)u=a(u,i[v],v,i);return u}function vn(i,a){for(var u=-1,d=Array(i);++u<i;)d[u]=a(u);return d}function wn(i,a){return i==null?void 0:i[a]}function xe(i){var a=!1;if(i!=null&&typeof i.toString!="function")try{a=!!(i+"")}catch{}return a}function Me(i){var a=-1,u=Array(i.size);return i.forEach(function(d,v){u[++a]=[v,d]}),u}function Ot(i,a){return function(u){return i(a(u))}}function $e(i){var a=-1,u=Array(i.size);return i.forEach(function(d){u[++a]=d}),u}var bn=Array.prototype,An=Function.prototype,et=Object.prototype,Tt=S["__core-js_shared__"],Pe=function(){var i=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),je=An.toString,M=et.hasOwnProperty,rt=et.toString,On=RegExp("^"+je.call(M).replace(un,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Re=pn?S.Buffer:void 0,Le=S.Symbol,Ve=S.Uint8Array,Tn=Ot(Object.getPrototypeOf,Object),Sn=Object.create,En=et.propertyIsEnumerable,Cn=bn.splice,Ie=Object.getOwnPropertySymbols,xn=Re?Re.isBuffer:void 0,Mn=Ot(Object.keys,Object),St=U(S,"DataView"),N=U(S,"Map"),Et=U(S,"Promise"),Ct=U(S,"Set"),xt=U(S,"WeakMap"),z=U(Object,"create"),$n=I(St),Pn=I(N),jn=I(Et),Rn=I(Ct),Ln=I(xt),Fe=Le?Le.prototype:void 0,ke=Fe?Fe.valueOf:void 0;function L(i){var a=-1,u=i?i.length:0;for(this.clear();++a<u;){var d=i[a];this.set(d[0],d[1])}}function Vn(){this.__data__=z?z(null):{}}function In(i){return this.has(i)&&delete this.__data__[i]}function Fn(i){var a=this.__data__;if(z){var u=a[i];return u===n?void 0:u}return M.call(a,i)?a[i]:void 0}function kn(i){var a=this.__data__;return z?a[i]!==void 0:M.call(a,i)}function Dn(i,a){var u=this.__data__;return u[i]=z&&a===void 0?n:a,this}L.prototype.clear=Vn,L.prototype.delete=In,L.prototype.get=Fn,L.prototype.has=kn,L.prototype.set=Dn;function E(i){var a=-1,u=i?i.length:0;for(this.clear();++a<u;){var d=i[a];this.set(d[0],d[1])}}function Qn(){this.__data__=[]}function Un(i){var a=this.__data__,u=nt(a,i);if(u<0)return!1;var d=a.length-1;return u==d?a.pop():Cn.call(a,u,1),!0}function qn(i){var a=this.__data__,u=nt(a,i);return u<0?void 0:a[u][1]}function Bn(i){return nt(this.__data__,i)>-1}function Gn(i,a){var u=this.__data__,d=nt(u,i);return d<0?u.push([i,a]):u[d][1]=a,this}E.prototype.clear=Qn,E.prototype.delete=Un,E.prototype.get=qn,E.prototype.has=Bn,E.prototype.set=Gn;function D(i){var a=-1,u=i?i.length:0;for(this.clear();++a<u;){var d=i[a];this.set(d[0],d[1])}}function Nn(){this.__data__={hash:new L,map:new(N||E),string:new L}}function zn(i){return it(this,i).delete(i)}function Jn(i){return it(this,i).get(i)}function Hn(i){return it(this,i).has(i)}function Yn(i,a){return it(this,i).set(i,a),this}D.prototype.clear=Nn,D.prototype.delete=zn,D.prototype.get=Jn,D.prototype.has=Hn,D.prototype.set=Yn;function Q(i){this.__data__=new E(i)}function Wn(){this.__data__=new E}function Kn(i){return this.__data__.delete(i)}function Xn(i){return this.__data__.get(i)}function Zn(i){return this.__data__.has(i)}function ti(i,a){var u=this.__data__;if(u instanceof E){var d=u.__data__;if(!N||d.length<r-1)return d.push([i,a]),this;u=this.__data__=new D(d)}return u.set(i,a),this}Q.prototype.clear=Wn,Q.prototype.delete=Kn,Q.prototype.get=Xn,Q.prototype.has=Zn,Q.prototype.set=ti;function ei(i,a){var u=Pt(i)||Si(i)?vn(i.length,String):[],d=u.length,v=!!d;for(var w in i)M.call(i,w)&&!(v&&(w=="length"||bi(w,d)))&&u.push(w);return u}function De(i,a,u){var d=i[a];(!(M.call(i,a)&&Be(d,u))||u===void 0&&!(a in i))&&(i[a]=u)}function nt(i,a){for(var u=i.length;u--;)if(Be(i[u][0],a))return u;return-1}function ri(i,a){return i&&Qe(a,jt(a),i)}function Mt(i,a,u,d,v,w,C){var b;if(d&&(b=w?d(i,v,w,C):d(i)),b!==void 0)return b;if(!ot(i))return i;var ze=Pt(i);if(ze){if(b=_i(i),!a)return gi(i,b)}else{var q=V(i),Je=q==g||q==R;if(Ci(i))return ui(i,a);if(q==bt||q==s||Je&&!w){if(xe(i))return w?i:{};if(b=vi(Je?{}:i),!a)return yi(i,ri(b,i))}else{if(!m[q])return w?i:{};b=wi(i,q,Mt,a)}}C||(C=new Q);var He=C.get(i);if(He)return He;if(C.set(i,b),!ze)var Ye=u?mi(i):jt(i);return mn(Ye||i,function(Rt,st){Ye&&(st=Rt,Rt=i[st]),De(b,st,Mt(Rt,a,u,d,st,i,C))}),b}function ni(i){return ot(i)?Sn(i):{}}function ii(i,a,u){var d=a(i);return Pt(i)?d:_n(d,u(i))}function oi(i){return rt.call(i)}function si(i){if(!ot(i)||Oi(i))return!1;var a=Ne(i)||xe(i)?On:ln;return a.test(I(i))}function ai(i){if(!qe(i))return Mn(i);var a=[];for(var u in Object(i))M.call(i,u)&&u!="constructor"&&a.push(u);return a}function ui(i,a){if(a)return i.slice();var u=new i.constructor(i.length);return i.copy(u),u}function $t(i){var a=new i.constructor(i.byteLength);return new Ve(a).set(new Ve(i)),a}function ci(i,a){var u=a?$t(i.buffer):i.buffer;return new i.constructor(u,i.byteOffset,i.byteLength)}function li(i,a,u){var d=a?u(Me(i),!0):Me(i);return Ce(d,gn,new i.constructor)}function fi(i){var a=new i.constructor(i.source,cn.exec(i));return a.lastIndex=i.lastIndex,a}function di(i,a,u){var d=a?u($e(i),!0):$e(i);return Ce(d,yn,new i.constructor)}function hi(i){return ke?Object(ke.call(i)):{}}function pi(i,a){var u=a?$t(i.buffer):i.buffer;return new i.constructor(u,i.byteOffset,i.length)}function gi(i,a){var u=-1,d=i.length;for(a||(a=Array(d));++u<d;)a[u]=i[u];return a}function Qe(i,a,u,d){u||(u={});for(var v=-1,w=a.length;++v<w;){var C=a[v],b=void 0;De(u,C,b===void 0?i[C]:b)}return u}function yi(i,a){return Qe(i,Ue(i),a)}function mi(i){return ii(i,jt,Ue)}function it(i,a){var u=i.__data__;return Ai(a)?u[typeof a=="string"?"string":"hash"]:u.map}function U(i,a){var u=wn(i,a);return si(u)?u:void 0}var Ue=Ie?Ot(Ie,Object):$i,V=oi;(St&&V(new St(new ArrayBuffer(1)))!=tt||N&&V(new N)!=X||Et&&V(Et.resolve())!=fe||Ct&&V(new Ct)!=Z||xt&&V(new xt)!=At)&&(V=function(i){var a=rt.call(i),u=a==bt?i.constructor:void 0,d=u?I(u):void 0;if(d)switch(d){case $n:return tt;case Pn:return X;case jn:return fe;case Rn:return Z;case Ln:return At}return a});function _i(i){var a=i.length,u=i.constructor(a);return a&&typeof i[0]=="string"&&M.call(i,"index")&&(u.index=i.index,u.input=i.input),u}function vi(i){return typeof i.constructor=="function"&&!qe(i)?ni(Tn(i)):{}}function wi(i,a,u,d){var v=i.constructor;switch(a){case ge:return $t(i);case l:case h:return new v(+i);case tt:return ci(i,d);case ye:case me:case _e:case ve:case we:case be:case Ae:case Oe:case Te:return pi(i,d);case X:return li(i,d,u);case le:case he:return new v(i);case de:return fi(i);case Z:return di(i,d,u);case pe:return hi(i)}}function bi(i,a){return a=a??o,!!a&&(typeof i=="number"||fn.test(i))&&i>-1&&i%1==0&&i<a}function Ai(i){var a=typeof i;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?i!=="__proto__":i===null}function Oi(i){return!!Pe&&Pe in i}function qe(i){var a=i&&i.constructor,u=typeof a=="function"&&a.prototype||et;return i===u}function I(i){if(i!=null){try{return je.call(i)}catch{}try{return i+""}catch{}}return""}function Ti(i){return Mt(i,!0,!0)}function Be(i,a){return i===a||i!==i&&a!==a}function Si(i){return Ei(i)&&M.call(i,"callee")&&(!En.call(i,"callee")||rt.call(i)==s)}var Pt=Array.isArray;function Ge(i){return i!=null&&xi(i.length)&&!Ne(i)}function Ei(i){return Mi(i)&&Ge(i)}var Ci=xn||Pi;function Ne(i){var a=ot(i)?rt.call(i):"";return a==g||a==R}function xi(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=o}function ot(i){var a=typeof i;return!!i&&(a=="object"||a=="function")}function Mi(i){return!!i&&typeof i=="object"}function jt(i){return Ge(i)?ei(i):ai(i)}function $i(){return[]}function Pi(){return!1}e.exports=Ti})(It,It.exports);var P=It.exports,Ft=function(){return Ft=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ft.apply(this,arguments)};function ji(e,t,r,n){function o(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function l(g){try{f(n.next(g))}catch(R){c(R)}}function h(g){try{f(n.throw(g))}catch(R){c(R)}}function f(g){g.done?s(g.value):o(g.value).then(l,h)}f((n=n.apply(e,[])).next())})}function Ri(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(f){return function(g){return h([f,g])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,f[0]&&(r=0)),r;)try{if(n=1,o&&(s=f[0]&2?o.return:f[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,f[1])).done)return s;switch(o=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,o=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){r.label=f[1];break}if(f[0]===6&&r.label<s[1]){r.label=s[1],s=f;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(f);break}s[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(g){f=[6,g],o=0}finally{n=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function at(e,t,r,n,o){return ji(this,void 0,void 0,function(){var s,c;return Ri(this,function(l){switch(l.label){case 0:if(r===void 0)return[2];c=0,l.label=1;case 1:return c<r.length?[4,r[c](e,t,n,o,r)]:[3,4];case 2:if(s=l.sent(),s==="canceled")return[3,4];l.label=3;case 3:return c++,[3,1];case 4:return s!=="canceled"?[2,s]:[2]}})})}var kt=function(e,t){return t===void 0&&(t={}),e?{trackedAnalytics:Ft({sdkCode:e.sdkCode,sdkSemver:e.sdkSemver,techVersion:e.techVersion},t)}:null},Li=function(){function e(t,r,n,o){var s=this;this.isMounted=!0,this.imgElement=t,this.htmlPluginState={cleanupCallbacks:[],pluginEventSubscription:[]};var c=P(r);at(t,c,n,this.htmlPluginState,o).then(function(l){if(s.isMounted){s.htmlPluginState.pluginEventSubscription.forEach(function(f){f()});var h=kt(o,l);s.imgElement.setAttribute("src",c.toURL(h))}})}return e.prototype.update=function(t,r,n){var o=this,s=P(t);at(this.imgElement,s,r,this.htmlPluginState).then(function(c){if(o.isMounted){var l=kt(n,c);o.imgElement.setAttribute("src",s.toURL(l))}})},e.prototype.unmount=function(){this.isMounted=!1},e}();let _=class{constructor(t){this.values=[],this.delimiter=":",this.hasValue(t)&&this.addValue(t)}toString(){return this.values.join(this.delimiter)}hasValue(t){return typeof t<"u"&&t!==null&&t!==""}addValue(t){return Array.isArray(t)?this.values=this.values.concat(t):this.values.push(t),this.values=this.values.filter(r=>this.hasValue(r)),this}setDelimiter(t){return this.delimiter=t,this}},Vi=class extends Error{constructor(t="Unsupported"){super(t)}};function Gt(e){return new Vi(e)}function Ii(){return this._qualifierModel||{error:Gt(`unsupported qualifier ${this.constructor.name}`)}}let Fi=class{constructor(){this._qualifierModel={}}toJson(){return Ii.apply(this)}},p=class extends Fi{constructor(t,r){super(),this.delimiter="_",this.key=t,r instanceof _?this.qualifierValue=r:(this.qualifierValue=new _,this.qualifierValue.addValue(r))}toString(){const{key:t,delimiter:r,qualifierValue:n}=this;return`${t}${r}${n.toString()}`}addValue(t){return this.qualifierValue.addValue(t),this}},A=class extends p{constructor(t,r){let n;r?n=new _([t,`${r}`]).setDelimiter(":"):n=t,super("fl",n),this.flagValue=r}toString(){return super.toString().replace(/\./,"%2E")}getFlagValue(){return this.flagValue}};function ki(e,t){const r=Array.from(e.entries());return t.forEach(n=>{r.push(["fl",n])}),r.sort().map(n=>n[1])}function Di(){var e,t,r;const n=this._actionModel&&Object.keys(this._actionModel).length,o=(r=(t=(e=this._actionModel)===null||e===void 0?void 0:e.source)===null||t===void 0?void 0:t.transformation)===null||r===void 0?void 0:r.error;return o&&o instanceof Error?{error:o}:n?this._actionModel:{error:Gt(`unsupported action ${this.constructor.name}`)}}let Qi=class{constructor(){this._actionModel={}}toJson(){return Di.apply(this)}},O=class extends Qi{constructor(){super(...arguments),this.qualifiers=new Map,this.flags=[],this.delimiter=",",this.actionTag=""}prepareQualifiers(){}getActionTag(){return this.actionTag}setActionTag(t){return this.actionTag=t,this}toString(){return this.prepareQualifiers(),ki(this.qualifiers,this.flags).join(this.delimiter)}addQualifier(t){if(typeof t=="string"){const[r,n]=t.toLowerCase().split("_");r==="fl"?this.flags.push(new A(n)):this.qualifiers.set(r,new p(r,n))}else this.qualifiers.set(t.key,t);return this}addFlag(t){return typeof t=="string"?this.flags.push(new A(t)):t instanceof A&&this.flags.push(t),this}addValueToQualifier(t,r){return this.qualifiers.get(t).addValue(r),this}};class Nt extends O{constructor(t){super(),this.regionType=t,this._actionModel.regionType=t}}class ht extends Nt{constructor(){super("custom")}x(t){return this._actionModel.x=t,this.addQualifier(new p("x",t)),this}y(t){return this._actionModel.y=t,this.addQualifier(new p("y",t)),this}width(t){return this._actionModel.width=t,this.addQualifier(new p("w",t)),this}height(t){return this._actionModel.height=t,this.addQualifier(new p("h",t)),this}static fromJson(t){const r=new ht;return t.width&&r.width(t.width),t.height&&r.height(t.height),t.x&&r.x(t.x),t.y&&r.y(t.y),r}}function Ui(){return new ht}function hr(){return new Nt("faces")}function qi(){return new Nt("ocr_text")}class Bi extends O{constructor(t){super(),this._actionModel={},this._strength=t,this._actionModel.actionType="blur",this._actionModel.strength=t}region(t){return this._region=t,this._actionModel.region=t.toJson(),this}strength(t){return this._strength=t,this._actionModel.strength=t,this}prepareQualifiers(){const t=this._strength?`:${this._strength}`:"";"_region"in this?(this._region.qualifiers.forEach(n=>this.addQualifier(n)),this._region.regionType==="custom"&&this.addQualifier(new p("e",`blur_region${t}`)),this._region.regionType==="ocr_text"&&(this.addQualifier(new p("e",`blur_region${t}`)),this.addQualifier(new p("g","ocr_text"))),this._region.regionType==="faces"&&this.addQualifier(new p("e",`blur_faces${t}`))):this.addQualifier(new p("e",`blur${t}`))}static fromJson(t){const{strength:r,region:n}=t,o=new this(r);return r&&o.strength(r),n&&n.regionType==="faces"&&o.region(hr()),n&&n.regionType==="ocr_text"&&o.region(qi()),n&&n.regionType==="custom"&&o.region(ht.fromJson(n)),o}}function F(e){const t={};return Object.keys(e).forEach(r=>{t[e[r]]=r}),t}const pr={limitFit:"limit",limitFill:"lfill",minimumFit:"mfit",thumbnail:"thumb",limitPad:"lpad",minimumPad:"mpad"},Gi={colorSpace:"cs",dpr:"dpr",density:"dn",defaultImage:"d",format:"f",quality:"q"},gr={redEye:"redeye",advancedRedEye:"adv_redeye",oilPaint:"oil_paint",unsharpMask:"unsharp_mask",makeTransparent:"make_transparent",generativeRestore:"gen_restore",upscale:"upscale"},yr={autoBest:"auto:best",autoEco:"auto:eco",autoGood:"auto:good",autoLow:"auto:low",jpegminiHigh:"jpegmini:1",jpegminiMedium:"jpegmini:2",jpegminiBest:"jpegmini:0"},Ni={fullHd:"full_hd",fullHdWifi:"full_hd_wifi",fullHdLean:"full_hd_lean",hdLean:"hd_lean"},mr={444:"CHROMA_444",420:"CHROMA_420"},zi={noCmyk:"no_cmyk",keepCmyk:"keep_cmyk",tinySrgb:"tinysrgb",srgbTrueColor:"srgb:truecolor"},Ji=F(mr);F(zi);const Hi=F(pr),Yi=F(Gi),_r=F(gr);F(yr);F(Ni);class vr extends O{constructor(t,r){super(),this._actionModel={},this._actionModel.actionType=_r[t]||t;const n=this.createEffectQualifier(t,r);this.addQualifier(n)}createEffectQualifier(t,r){let n;return r?n=new _([t,`${r}`]).setDelimiter(":"):n=new _(t),new p("e",n)}static fromJson(t){const{actionType:r,level:n,strength:o}=t,s=gr[r]||r;return new this(s,n||o)}}class Wi extends vr{constructor(t,r){super(t,r),this.LEVEL_NAME="level",this._actionModel={},this.effectType=t,this._actionModel.actionType=_r[t]||t,r&&this.setLevel(r)}setLevel(t){this._actionModel[this.LEVEL_NAME]=t;const r=this.createEffectQualifier(this.effectType,t);return this.addQualifier(r),this}}function pt(e){return e&&(e.match(/^#/)?`rgb:${e.substr(1)}`:e)}class Ki extends O{constructor(){super(),this._actionModel={},this._actionModel.actionType="vectorize"}numOfColors(t){return this._actionModel.numOfColors=t,this._numOfColors=t,this}detailsLevel(t){return this._actionModel.detailLevel=t,this._detailsLevel=t,this}despeckleLevel(t){return this._actionModel.despeckleLevel=t,this._despeckleLevel=t,this}cornersLevel(t){return this._actionModel.cornersLevel=t,this._cornersLevel=t,this}paths(t){return this._actionModel.paths=t,this._paths=t,this}prepareQualifiers(){let t="vectorize";this._numOfColors&&(t+=`:${new _(`colors:${this._numOfColors}`).toString()}`),this._detailsLevel&&(t+=`:${new _(`detail:${this._detailsLevel}`).toString()}`),this._despeckleLevel&&(t+=`:${new _(`despeckle:${this._despeckleLevel}`).toString()}`),this._paths&&(t+=`:${new _(`paths:${this._paths}`).toString()}`),this._cornersLevel&&(t+=`:${new _(`corners:${this._cornersLevel}`).toString()}`),this.addQualifier(new p("e",t))}static fromJson(t){const{actionType:r,paths:n,cornersLevel:o,despeckleLevel:s,detailLevel:c,numOfColors:l}=t,h=new this;return n&&h.paths(n),o&&h.cornersLevel(o),s&&h.despeckleLevel(s),c&&h.detailsLevel(c),l&&h.numOfColors(l),h}}class Xi extends Wi{level(t){return this._actionModel.level=t,this.setLevel(t)}}class Zi extends O{constructor(){super(),this._actionModel={},this._actionModel.actionType="assistColorblind",this.addQualifier(new p("e",new _("assist_colorblind")))}xray(){return this._actionModel.type="xray",this.addQualifier(new p("e",new _(["assist_colorblind","xray"]).setDelimiter(":")))}stripesStrength(t){return this._actionModel.type="stripes",this._actionModel.stripesStrength=t,this.addQualifier(new p("e",new _(["assist_colorblind",t]).setDelimiter(":")))}static fromJson(t){const{actionType:r,type:n,stripesStrength:o}=t,s=new this;return n==="xray"&&s.xray(),n==="stripes"&&o&&s.stripesStrength(o),s}}class to extends Xi{color(t){return this._actionModel.color=t,this.addQualifier(new p("co",new _(pt(t))))}static fromJson(t){const{actionType:r,level:n,color:o}=t,s=new this(r,n);return o&&s.color(o),s}}class eo extends O{constructor(t){super(),this._actionModel={},this._squareSize=t,this._actionModel.actionType="pixelate",this._actionModel.squareSize=t}region(t){return this._region=t,this._actionModel.region={regionType:this._region.regionType},this}squareSize(t){return this._squareSize=t,this._actionModel.squareSize=t,this}prepareQualifiers(){const t=this._squareSize?`:${this._squareSize}`:"";"_region"in this?(this._region.qualifiers.forEach(n=>this.addQualifier(n)),this._region.regionType==="custom"&&this.addQualifier(new p("e",`pixelate_region${t}`)),this._region.regionType==="ocr_text"&&(this.addQualifier(new p("e",`pixelate_region${t}`)),this.addQualifier(new p("g","ocr_text"))),this._region.regionType==="faces"&&this.addQualifier(new p("e",`pixelate_faces${t}`))):this.addQualifier(new p("e",`pixelate${t}`))}static fromJson(t){const{region:r,squareSize:n}=t,o=new this(n);return n&&o.squareSize(n),r&&r.regionType==="faces"&&o.region(hr()),r&&r.regionType==="custom"&&o.region(Ui()),o}}function ro(e){return new Bi(e)}function no(){return new vr("grayscale")}function We(e){return new to("colorize",e)}function io(){return new Ki}function oo(){return new Zi}function so(e){return new eo(e)}let ao=class extends O{constructor(t){super(),this._actionModel={},this.addQualifier(new p("b",new _(pt(t)).setDelimiter("_"))),this._actionModel.color=t,this._actionModel.actionType="backgroundColor"}static fromJson(t){const{color:r}=t;return new this(r)}},Ke=class{constructor(t){this.raw=t}toString(){return this.raw}toJson(){return{error:Gt(`unsupported action ${this.constructor.name}`)}}};function uo(e){const t=e;return"error"in t&&!!t.error}function co(){return new A("ignore_aspect_ratio")}function lo(){return new A("lossy")}function fo(){return new A("preserve_transparency")}function ho(e){return new A("progressive",e)}function po(){return new A("region_relative")}function go(){return new A("relative")}let zt=class extends _{constructor(t){super(t),this.val=t}getValue(){return this.val}},wr=class extends O{constructor(t,r,n){super(),this._actionModel={};let o;r instanceof zt?o=r.getValue():o=r,this._actionModel.actionType=Yi[t],this._actionModel[n]=o,this.addQualifier(new p(t,r))}},yo=class extends A{constructor(t){super("progressive",t)}},Dt=class extends wr{constructor(t,r){super(t,r,"formatType")}lossy(){return this._actionModel.lossy=!0,this.addFlag(lo()),this}progressive(t){return t instanceof yo?(this._actionModel.progressive={mode:t.getFlagValue()},this.addFlag(t)):(this._actionModel.progressive={mode:t},this.addFlag(ho(t))),this}preserveTransparency(){return this._actionModel.preserveTransparency=!0,this.addFlag(fo()),this}static fromJson(t){const{formatType:r,lossy:n,progressive:o,preserveTransparency:s}=t;let c;return r?c=new this("f",r):c=new this("f"),o&&(o.mode?c.progressive(o.mode):c.progressive()),n&&c.lossy(),s&&c.preserveTransparency(),c}},gt=class br{constructor(){this.actions=[]}addAction(t){let r;if(typeof t=="string"){if(t.indexOf("/")>=0)throw"addAction cannot accept a string with a forward slash in it - /, use .addTransformation() instead";r=new Ke(t)}else r=t;return this.actions.push(r),this}addTransformation(t){return t instanceof br?this.actions=this.actions.concat(t.actions):this.actions.push(new Ke(t)),this}toString(){return this.actions.map(t=>t.toString()).filter(t=>t).join("/")}animated(t){return this.addAction(t)}border(t){return this.addAction(t)}reshape(t){return this.addAction(t)}resize(t){return this.addAction(t)}quality(t){return this.addAction(new Dt("q",t)),this}format(t){return this.addAction(new Dt("f",t)),this}roundCorners(t){return this.addAction(t)}overlay(t){return this.addAction(t)}underlay(t){return t.setLayerType("u"),this.addAction(t)}addVariable(t){return this.addAction(t)}conditional(t){return this.addAction(t)}effect(t){return this.addAction(t)}adjust(t){return this.addAction(t)}rotate(t){return this.addAction(t)}namedTransformation(t){return this.addAction(t)}delivery(t){return this.addAction(t)}backgroundColor(t){return this.addAction(new ao(t))}psdTools(t){return this.addAction(t)}extract(t){return this.addAction(t)}addFlag(t){const r=new O;let n=t;return typeof t=="string"&&(n=new A(t)),r.addQualifier(n),this.addAction(r)}customFunction(t){return this.addAction(t)}transcode(t){return this.addAction(t)}videoEdit(t){return this.addAction(t)}toJson(){const t=[];for(const r of this.actions){const n=r.toJson();if(uo(n))return n;t.push(n)}return{actions:t}}};function Xe(e){const t=e.toString();return t.match(/[A-Z]/gi)||t.length>1&&t[0]==="0"?t:!isNaN(parseFloat(t))&&t.indexOf(":")===-1&&t.indexOf(".")===-1?`${t}.0`:t}class mo extends _{}class _o extends O{constructor(t,r,n){super(),this._actionModel={dimensions:{}},this._actionModel.actionType=Hi[t]||t,this.addQualifier(new p("c",t)),r&&this.width(r),n&&this.height(n)}height(t){return this._actionModel.dimensions.height=t,this.addQualifier(new p("h",t))}width(t){return this._actionModel.dimensions.width=t,this.addQualifier(new p("w",t))}aspectRatio(t){if(t instanceof mo)return this._actionModel.dimensions.aspectRatio=`${t}`,this.addQualifier(new p("ar",t));if(typeof t=="number"||typeof t=="string")return this._actionModel.dimensions.aspectRatio=Xe(t),this.addQualifier(new p("ar",Xe(t)));if(t instanceof A)return this._actionModel.dimensions.aspectRatio=`${t.qualifierValue}`,this.addFlag(t)}relative(){return this._actionModel.relative=!0,this.addFlag(go())}regionRelative(){return this._actionModel.regionRelative=!0,this.addFlag(po())}static fromJson(t){const{actionType:r,dimensions:n,relative:o,regionRelative:s}=t,{aspectRatio:c,width:l,height:h}=n,f=pr[r]||r,g=new this(f,l,h);return c&&g.aspectRatio(c==="ignore_aspect_ratio"?co():c),o&&g.relative(),s&&g.regionRelative(),g}}class Jt extends p{constructor(t){super("g",new _(t))}}class Ar extends Jt{constructor(){super("auto")}autoFocus(...t){return this.addValue(t),this}}class Or extends Jt{constructor(t){super(t)}fallbackGravity(t){return this.addValue(t.qualifierValue),this}}class Tr extends Jt{constructor(t){super(t)}}function vo(e){return new Tr(e)}function Sr(...e){const t=[...e];return new Or(t)}function Er(){return new Ar}class yt extends _{constructor(t){super(),this.name=t}toString(){return this.name}}function wo(){return new yt("ocr_text")}function bo(e){return e&&`${e}`.split(":")[0]==="auto"}function Ao(e){const t=Ht(e);return["north","center","east","west","south","north_west","south_east","south_west","north_east"].includes(t)}function Ht(e){return`${e}`.replace("g_","")}function Oo(e){return{compass:Ht(e),gravityType:"direction"}}function To(e){return Ht(e)==="ocr_text"}function So(){return{gravityType:"ocr"}}function Eo(e){return`${e.qualifierValue}`.split(":")[0]==="auto"}function Co(e){const r=e.toString().split("_"),n={object:r[0]};return r.length>1&&(r[1]==="avoid"?n.avoid=!0:n.weight=+r[1]),n}function Cr(e){let t;const r=e==="auto"?new Ar:e;return`${e}`.startsWith("auto:")?t=`${e}`.split(":").filter(o=>o!=="auto"):t=r.qualifierValue.values.filter(o=>o!=="auto"),{gravityType:"auto",autoFocus:t.map(Co)}}function xo(e){const t=`${e}`.split(":").includes("auto"),r=e.qualifierValue.values,o={gravityType:"object",focusOnObjects:(t?r.slice(0,r.length-1):r).map(s=>`${s}`)};if(t){const s=r[r.length-1].values.slice(1),c=Er().autoFocus(...s);o.fallbackGravity=Cr(c)}return o}function Mo(e){const r=e.split(":").map(n=>new yt(n));return new Or(r)}function $o(e){return Ao(e)?Oo(e):To(e)?So():bo(e)||Eo(e)?Cr(e):xo(typeof e=="string"?Mo(e):e)}class Yt extends _{constructor(t,r){super(),this._weight=r,this.focusOn=t,this.shouldAvoid=!1}static focusOn(t,r){return new Yt(t,r)}shouldAddWeight(){return typeof this._weight=="number"||typeof this._weight=="string"||this.shouldAvoid}getName(){return this.focusOn.name}getWeight(){return this.shouldAvoid?"avoid":this._weight}toString(){return this.shouldAddWeight()?`${this.getName()}_${this.getWeight()}`:`${this.getName()}`}weight(t){return this._weight=t,this}avoid(){return this.shouldAvoid=!0,this}}class xr extends _{constructor(t){super(),this.val=t}toString(){return this.val}}function Po(e){return e.gravityType==="direction"}function jo(e){return e.gravityType==="ocr"}function Ro(e){return e.gravityType==="auto"}function Lo(e){const{object:t,weight:r,avoid:n}=e,o=new Yt(new yt(t));return(r||r===0)&&o.weight(r),n&&o.avoid(),o}function Mr(e){const r=(e.autoFocus||[]).map(Lo);return Er().autoFocus(...r)}function Vo(e){const t=(e.focusOnObjects||[]).map(n=>new yt(n)),r=Sr(...t);if(e.fallbackGravity){const n=Mr(e.fallbackGravity);r.fallbackGravity(n)}return r}function Io(e){return Po(e)?new Tr(new xr(e.compass)):jo(e)?Sr(wo()):Ro(e)?Mr(e):Vo(e)}class Wt extends _o{gravity(t){this._actionModel.gravity=$o(t);const r=typeof t=="string"?new p("g",t):t;return this.addQualifier(r)}static fromJson(t){const r=super.fromJson.apply(this,[t]);return t.gravity&&r.gravity(Io(t.gravity)),r}}class Y extends p{constructor(t){super("b"),t&&this.addValue(t)}}const $r=100,Fo=0;class ko extends Y{intensity(t){return this.intensityLevel=t,this}brightness(t){return this.brightnessLevel=t,this}toString(){const t=this.intensityLevel!==void 0?`:${this.intensityLevel}`:"",r=this.brightnessLevel!==void 0?this.intensityLevel!==void 0?`:${this.brightnessLevel}`:`:${$r}:${this.brightnessLevel}`:"";return`b_blurred${t}${r}`}}var Pr=ko;class Kt extends Y{constructor(){super(),this._palette=[]}contrast(){return this._contrast=!0,this}palette(...t){return this._palette=t.map(r=>pt(r)),this}}class jr extends Kt{toString(){return`
    b_auto:border
    ${this._contrast?"_contrast":""}
    ${this._palette.length?`:palette_${this._palette.join("_")}`:""}
    `.replace(/\s+/g,"")}}class Rr extends Kt{gradientColors(t){return this._gradientColors=t,this}gradientDirection(t){return this._gradientDirection=t,this}}class Lr extends Rr{toString(){return`
    b_auto:border_gradient
    ${this._contrast?"_contrast":""}
    ${this._gradientColors?`:${this._gradientColors}`:""}
    ${this._gradientDirection?`:${this._gradientDirection}`:""}
    ${this._palette.length?`:palette_${this._palette.join("_")}`:""}
    `.replace(/\s+/g,"")}}class Vr extends Rr{toString(){return`
    b_auto:predominant_gradient
    ${this._contrast?"_contrast":""}
    ${this._gradientColors?`:${this._gradientColors}`:""}
    ${this._gradientDirection?`:${this._gradientDirection}`:""}
    ${this._palette.length?`:palette_${this._palette.join("_")}`:""}
    `.replace(/\s+/g,"")}}class Ir extends Kt{toString(){return`
    b_auto:predominant
    ${this._contrast?"_contrast":""}
    ${this._palette.length?`:palette_${this._palette.join("_")}`:""}
    `.replace(/\s+/g,"")}}class Fr extends Y{constructor(){super("gen_fill"),this._backgroundType="generativeFill"}prompt(t){return this._prompt=t,this}getPrompt(){return this._prompt}getBackgroundType(){return this._backgroundType}toString(){return`b_gen_fill${this._prompt?`:prompt_${this._prompt}`:""}`}}function kr(e){return`${e}`.replace("b_","")}function Do(){return{backgroundType:"auto"}}function Qo(e){const{intensityLevel:t,brightnessLevel:r}=e,n={backgroundType:"blurred"};return(t||t===0)&&(n.intensity=t),(r||r===0)&&(n.brightness=r),n}function Xt(e){const t=e._contrast,r=e._palette,n={backgroundType:""};return t&&(n.contrast=!0),r&&(n.palette=r),n}function Uo(e){return Object.assign(Object.assign({},Xt(e)),{backgroundType:"border"})}function Dr(e){const t=e._gradientColors,r=`${e._gradientDirection}`,n=Xt(e);return t&&(n.gradientColors=t),r&&(n.gradientDirection=r),n}function qo(e){return Object.assign(Object.assign({},Dr(e)),{backgroundType:"borderGradient"})}function Bo(e){return{backgroundType:"color",color:kr(e)}}function Go(e){return Object.assign(Object.assign({},Xt(e)),{backgroundType:"predominant"})}function No(e){return Object.assign(Object.assign({},Dr(e)),{backgroundType:"predominantGradient"})}function zo(e){return Object.assign({backgroundType:e.getBackgroundType()},e.getPrompt()?{prompt:e.getPrompt()}:{})}function Jo(e){return kr(e)==="auto"?Do():e instanceof Pr?Qo(e):e instanceof jr?Uo(e):e instanceof Lr?qo(e):e instanceof Ir?Go(e):e instanceof Vr?No(e):e instanceof Fr?zo(e):Bo(e)}function Ho(){return new zt("svg")}function Zt(){return new zt("auto")}function Qr(){return new jr}function Ur(){return new Y("auto")}function qr(){return new Lr}function Br(){return new Vr}function Gr(){return new Ir}function Nr(e){return new Y(pt(e))}function Yo(){return new Pr}function zr(){return new Fr}const Jr={auto:Ur,border:Qr,borderGradient:qr,predominantGradient:Br,predominant:Gr,color:Nr,blurred:Yo,generativeFill:zr};function Wo(e){const{brightness:t,intensity:r}=e,n=Jr.blurred();return n.brightness(t??Fo),n.intensity(r??$r),n}function Ze(e,t){const{gradientColors:r,gradientDirection:n,contrast:o,palette:s}=t;return o&&e.contrast(),s&&e.palette(...s),r&&e.gradientColors(+r),n&&e.gradientDirection(n),e}function tr(e,t){const{contrast:r,palette:n}=t;return r&&e.contrast(),n&&e.palette(...n),e}function Ko(e,t){const{prompt:r}=t;return r&&e.prompt(r),e}function Xo(e){const{backgroundType:t}=e;switch(t){case"auto":return Ur();case"blurred":return Wo(e);case"border":return tr(Qr(),e);case"borderGradient":return Ze(qr(),e);case"predominant":return tr(Gr(),e);case"predominantGradient":return Ze(Br(),e);case"generativeFill":return Ko(zr(),e);default:return Nr(e.color)}}class Zo extends Wt{background(t){return this._actionModel.background=Jo(t),this.addQualifier(t)}offsetX(t){return this._actionModel.x=t,this.addQualifier(new p("x",t))}offsetY(t){return this._actionModel.y=t,this.addQualifier(new p("y",t))}static fromJson(t){const r=super.fromJson.apply(this,[t]);return t.background&&r.background(Xo(t.background)),t.x&&r.offsetX(t.x),t.y&&r.offsetY(t.y),t.zoom&&r.zoom(t.zoom),r}}class ts extends Wt{x(t){return this._actionModel.x=t,this.addQualifier(new p("x",t))}y(t){return this._actionModel.y=t,this.addQualifier(new p("y",t))}zoom(t){return this._actionModel.zoom=t,this.addQualifier(new p("z",t))}static fromJson(t){const r=super.fromJson.apply(this,[t]);return t.x&&r.x(t.x),t.y&&r.y(t.y),t.zoom&&r.zoom(t.zoom),r}}class es extends Wt{x(t){return this._actionModel.x=t,this.addQualifier(new p("x",t))}y(t){return this._actionModel.y=t,this.addQualifier(new p("y",t))}static fromJson(t){const r=super.fromJson.apply(this,[t]);return t.x&&r.x(t.x),t.y&&r.y(t.y),r}}function rs(e,t){return new ts("crop",e,t)}function ns(e,t){return new es("fill",e,t)}function is(e,t){return new Zo("pad",e,t)}class os extends wr{constructor(t){super("q",t.toString(),"level")}chromaSubSampling(t){this._actionModel.chromaSubSampling=mr[t];const r=new _([this._actionModel.level,t]);return r.setDelimiter(":"),this.addQualifier(new p("q",r))}quantization(t){this._actionModel.quantization=t;const r=new _([this._actionModel.level,`qmax_${t}`]).setDelimiter(":");return this.addQualifier(new p("q",r))}static fromJson(t){const{level:r,chromaSubSampling:n,quantization:o}=t,s=yr[r]||r,c=new this(s);if(n){const l=Ji[n.toUpperCase()];l&&c.chromaSubSampling(+l)}return o&&c.quantization(o),c}}function mt(e){return new Dt("f",e)}function _t(e){return new os(e)}function ss(){return new xr("north_east")}We(70).color("black"),We(40).color("white"),no(),oo();var as=new gt().effect(io()).delivery(_t("auto")).delivery(mt(Ho())),us=new gt().effect(so()).delivery(_t("auto")).delivery(mt(Zt())),cs=new gt().effect(ro(2e3)).delivery(_t("auto")).delivery(mt(Zt())),ls=new gt().resize(is("iw_div_2").aspectRatio(1).background(Jr.auto())).resize(rs(1,1).gravity(vo(ss()))).resize(ns().height("ih").width("iw")).delivery(_t("auto")).delivery(mt(Zt())),er={vectorize:as,pixelate:us,blur:cs,"predominant-color":ls},rr="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",nr={flv:"x-flv","3gp":"3gpp",mov:"quicktime",mpg:"mpeg",avi:"x-msvideo",wmv:"x-ms-wmv",ogv:"ogg",webm:"webm",mp4:"mp4"},ir="?_a=",fs=function(){function e(t,r,n,o,s,c,l){var h=this;this.mimeType="video",this.mimeSubTypes=nr,this.videoElement=t,this.originalVideo=r,this.videoOptions=l,this.htmlPluginState={cleanupCallbacks:[],pluginEventSubscription:[]};var f=P(r);at(t,r,o,this.htmlPluginState).then(function(){h.htmlPluginState.pluginEventSubscription.forEach(function(g){g()}),h.setVideoAttributes(s,c),h.handleSourceToVideo(f,n)})}return e.prototype.handleSourceToVideo=function(t,r){var n=this;if(r)this.generateUserSources(t,r);else{var o=["webm","mp4","ogv"];o.forEach(function(s){n.appendSourceTag(P(t),s)})}},e.prototype.generateUserSources=function(t,r){var n=this;r.map(function(o){var s=o.type,c=o.codecs,l=o.transcode;return n.appendSourceTag(P(t).transcode(l),s,n.buildMimeType(s,c))})},e.prototype.appendSourceTag=function(t,r,n){var o,s=document.createElement("source"),c=(o=this.videoOptions)===null||o===void 0?void 0:o.useFetchFormat;c&&t.format(r);var l=t.toURL(),h=l.split(ir),f=h[1]?"".concat(ir).concat(h[1]):"",g=c?"":".".concat(r);s.src="".concat(h[0]).concat(g).concat(f),s.type=n||"video/".concat(nr[r]||r),this.videoElement.appendChild(s)},e.prototype.buildMimeType=function(t,r){var n="".concat(this.mimeType,"/").concat(this.mimeSubTypes[t]||t);return r&&(n+="; codecs="+(Array.isArray(r)?r.join(", "):r)),n},e.prototype.setVideoAttributes=function(t,r){var n;if(t===void 0&&(t={}),r==="auto"){var o=P(this.originalVideo);t.poster=o.quality("auto").format("jpg").addTransformation("so_auto").toURL()}else r&&(t.poster=(n=r.toURL)===null||n===void 0?void 0:n.call(r));for(var s=0,c=Object.entries(t);s<c.length;s++){var l=c[s],h=l[0],f=l[1];f&&this.videoElement.setAttribute(h,h==="poster"?f:"")}},e.prototype.update=function(t,r,n,o,s){var c=this;if(t!==this.originalVideo){for(var l=this.videoElement.getElementsByTagName("SOURCE");l[0];)l[0].parentNode.removeChild(l[0]);at(this.videoElement,t,n,this.htmlPluginState).then(function(){c.setVideoAttributes(o,s),c.handleSourceToVideo(t,r),c.videoElement.load()})}},e}(),ds=typeof $=="object"&&$&&$.Object===Object&&$,hs=typeof self=="object"&&self&&self.Object===Object&&self;ds||hs||Function("return this")();function te(){return typeof window<"u"}function ps(e){return e instanceof HTMLImageElement}function Ja(e){var t={},r=t.rootMargin,n=r===void 0?"0px":r,o=t.threshold,s=o===void 0?.1:o;return gs.bind(null,n,s)}function gs(e,t,r,n,o,s){return e===void 0&&(e="0px"),t===void 0&&(t=.1),te()?new Promise(function(c){var l=function(){return c({lazyload:!0})},h=ms(r,l,e,t);o.cleanupCallbacks.push(function(){h(),c("canceled")})}):!1}function ys(){return window&&"IntersectionObserver"in window}function ms(e,t,r,n){try{if(!ys())return t(),function(){};var o=new IntersectionObserver(function(s){s.forEach(function(c){c.isIntersecting&&(o.unobserve(c.target),t())})},{rootMargin:r,threshold:n});return o.observe(e),function(){e&&o.observe(e)}}catch{t()}}function Ha(e){var t=e===void 0?{}:e,r=t.mode,n=r===void 0?"vectorize":r;return _s.bind(null,n)}function _s(e,t,r,n,o,s){er[e]||(e="vectorize");var c=er[e].actions,l=P(r);if(c.forEach(function(f){l.addAction(f)}),!te())return r.transformation=l.transformation,!0;if(ps(t)){l.transformation.actions.forEach(function(f,g){f instanceof O&&f.getActionTag()==="responsive"&&delete l.transformation.actions[g]});var h=kt(o,{placeholder:!0});return t.src=l.toURL(h),t.onerror=function(){t.src=rr},new Promise(function(f){t.onload=function(){f()}}).then(function(){return new Promise(function(f){n.cleanupCallbacks.push(function(){t.src=rr,f("canceled")});var g=new Image;g.src=r.toURL(h),g.onload=function(){f({placeholder:!0})},g.onerror=function(){f({placeholder:!0})}})})}}function vs(e,t,r){var n=P(t);if(e)for(var o=0;o<e.length;o++){var s=e[o](null,n);if(!s)break}return n.toURL(r?{trackedAnalytics:r}:null)}function ut(e){e.cleanupCallbacks.forEach(function(t){t()})}var Qt=function(e,t){return Qt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Qt(e,t)};function Hr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Qt(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var J=function(){return J=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},J.apply(this,arguments)};function Yr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}var ct={exports:{}},y={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var or=Object.getOwnPropertySymbols,ws=Object.prototype.hasOwnProperty,bs=Object.prototype.propertyIsEnumerable;function As(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Os(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(n.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(s){o[s]=s}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Ts=Os()?Object.assign:function(e,t){for(var r,n=As(e),o,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var c in r)ws.call(r,c)&&(n[c]=r[c]);if(or){o=or(r);for(var l=0;l<o.length;l++)bs.call(r,o[l])&&(n[o[l]]=r[o[l]])}}return n};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ee=Ts,T=typeof Symbol=="function"&&Symbol.for,W=T?Symbol.for("react.element"):60103,Ss=T?Symbol.for("react.portal"):60106,Es=T?Symbol.for("react.fragment"):60107,Cs=T?Symbol.for("react.strict_mode"):60108,xs=T?Symbol.for("react.profiler"):60114,Ms=T?Symbol.for("react.provider"):60109,$s=T?Symbol.for("react.context"):60110,Ps=T?Symbol.for("react.forward_ref"):60112,js=T?Symbol.for("react.suspense"):60113,Rs=T?Symbol.for("react.memo"):60115,Ls=T?Symbol.for("react.lazy"):60116,sr=typeof Symbol=="function"&&Symbol.iterator;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wr={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kr={};function G(e,t,r){this.props=e,this.context=t,this.refs=Kr,this.updater=r||Wr}G.prototype.isReactComponent={};G.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(K(85));this.updater.enqueueSetState(this,e,t,"setState")};G.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xr(){}Xr.prototype=G.prototype;function re(e,t,r){this.props=e,this.context=t,this.refs=Kr,this.updater=r||Wr}var ne=re.prototype=new Xr;ne.constructor=re;ee(ne,G.prototype);ne.isPureReactComponent=!0;var ie={current:null},Zr=Object.prototype.hasOwnProperty,tn={key:!0,ref:!0,__self:!0,__source:!0};function en(e,t,r){var n,o={},s=null,c=null;if(t!=null)for(n in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(s=""+t.key),t)Zr.call(t,n)&&!tn.hasOwnProperty(n)&&(o[n]=t[n]);var l=arguments.length-2;if(l===1)o.children=r;else if(1<l){for(var h=Array(l),f=0;f<l;f++)h[f]=arguments[f+2];o.children=h}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)o[n]===void 0&&(o[n]=l[n]);return{$$typeof:W,type:e,key:s,ref:c,props:o,_owner:ie.current}}function Vs(e,t){return{$$typeof:W,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function oe(e){return typeof e=="object"&&e!==null&&e.$$typeof===W}function Is(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(r){return t[r]})}var rn=/\/+/g,lt=[];function nn(e,t,r,n){if(lt.length){var o=lt.pop();return o.result=e,o.keyPrefix=t,o.func=r,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function on(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>lt.length&&lt.push(e)}function Ut(e,t,r,n){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case W:case Ss:s=!0}}if(s)return r(n,e,t===""?"."+Lt(e,0):t),1;if(s=0,t=t===""?".":t+":",Array.isArray(e))for(var c=0;c<e.length;c++){o=e[c];var l=t+Lt(o,c);s+=Ut(o,l,r,n)}else if(e===null||typeof e!="object"?l=null:(l=sr&&e[sr]||e["@@iterator"],l=typeof l=="function"?l:null),typeof l=="function")for(e=l.call(e),c=0;!(o=e.next()).done;)o=o.value,l=t+Lt(o,c++),s+=Ut(o,l,r,n);else if(o==="object")throw r=""+e,Error(K(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return s}function qt(e,t,r){return e==null?0:Ut(e,"",t,r)}function Lt(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Is(e.key):t.toString(36)}function Fs(e,t){e.func.call(e.context,t,e.count++)}function ks(e,t,r){var n=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?Bt(e,n,r,function(s){return s}):e!=null&&(oe(e)&&(e=Vs(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(rn,"$&/")+"/")+r)),n.push(e))}function Bt(e,t,r,n,o){var s="";r!=null&&(s=(""+r).replace(rn,"$&/")+"/"),t=nn(t,s,n,o),qt(e,ks,t),on(t)}var sn={current:null};function x(){var e=sn.current;if(e===null)throw Error(K(321));return e}var Ds={ReactCurrentDispatcher:sn,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:ie,IsSomeRendererActing:{current:!1},assign:ee};y.Children={map:function(e,t,r){if(e==null)return e;var n=[];return Bt(e,n,null,t,r),n},forEach:function(e,t,r){if(e==null)return e;t=nn(null,null,t,r),qt(e,Fs,t),on(t)},count:function(e){return qt(e,function(){return null},null)},toArray:function(e){var t=[];return Bt(e,t,null,function(r){return r}),t},only:function(e){if(!oe(e))throw Error(K(143));return e}};y.Component=G;y.Fragment=Es;y.Profiler=xs;y.PureComponent=re;y.StrictMode=Cs;y.Suspense=js;y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ds;y.cloneElement=function(e,t,r){if(e==null)throw Error(K(267,e));var n=ee({},e.props),o=e.key,s=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,c=ie.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(h in t)Zr.call(t,h)&&!tn.hasOwnProperty(h)&&(n[h]=t[h]===void 0&&l!==void 0?l[h]:t[h])}var h=arguments.length-2;if(h===1)n.children=r;else if(1<h){l=Array(h);for(var f=0;f<h;f++)l[f]=arguments[f+2];n.children=l}return{$$typeof:W,type:e.type,key:o,ref:s,props:n,_owner:c}};y.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:$s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:Ms,_context:e},e.Consumer=e};y.createElement=en;y.createFactory=function(e){var t=en.bind(null,e);return t.type=e,t};y.createRef=function(){return{current:null}};y.forwardRef=function(e){return{$$typeof:Ps,render:e}};y.isValidElement=oe;y.lazy=function(e){return{$$typeof:Ls,_ctor:e,_status:-1,_result:null}};y.memo=function(e,t){return{$$typeof:Rs,type:e,compare:t===void 0?null:t}};y.useCallback=function(e,t){return x().useCallback(e,t)};y.useContext=function(e,t){return x().useContext(e,t)};y.useDebugValue=function(){};y.useEffect=function(e,t){return x().useEffect(e,t)};y.useImperativeHandle=function(e,t,r){return x().useImperativeHandle(e,t,r)};y.useLayoutEffect=function(e,t){return x().useLayoutEffect(e,t)};y.useMemo=function(e,t){return x().useMemo(e,t)};y.useReducer=function(e,t,r){return x().useReducer(e,t,r)};y.useRef=function(e){return x().useRef(e)};y.useState=function(e){return x().useState(e)};y.version="16.14.0";Function.call.bind(Object.prototype.hasOwnProperty);ct.exports=y;var B=ct.exports,Vt={sdkSemver:"1.13.0",techVersion:B.version,sdkCode:"J"},Ya=function(e){Hr(t,e);function t(r){var n=e.call(this,r)||this;return n.imageRef=B.createRef(),n}return t.prototype.componentDidMount=function(){this.htmlLayerInstance=new Li(this.imageRef.current,this.props.cldImg,this.props.plugins,Vt)},t.prototype.componentDidUpdate=function(){ut(this.htmlLayerInstance.htmlPluginState),this.htmlLayerInstance.update(this.props.cldImg,this.props.plugins,Vt)},t.prototype.componentWillUnmount=function(){ut(this.htmlLayerInstance.htmlPluginState),this.htmlLayerInstance.unmount()},t.prototype.render=function(){var r=this.props;r.cldImg,r.plugins;var n=Yr(r,["cldImg","plugins"]);if(te())return B.createElement("img",J({suppressHydrationWarning:!0},n,{ref:this.imageRef}));var o=vs(this.props.plugins,this.props.cldImg,Vt);return B.createElement("img",J({},n,{src:o}))},t}(B.Component),Qs=["controls","loop","muted","poster","preload","autoplay","playsinline"];(function(e){Hr(t,e);function t(r){var n=e.call(this,r)||this;return n.videoRef=ct.exports.createRef(),n.attachRef=n.attachRef.bind(n),n}return t.prototype.componentDidMount=function(){this.htmlVideoLayerInstance=new fs(this.videoRef&&this.videoRef.current,this.props.cldVid,this.props.sources,this.props.plugins,this.getVideoAttributes(),this.props.cldPoster,{useFetchFormat:this.props.useFetchFormat})},t.prototype.componentDidUpdate=function(){ut(this.htmlVideoLayerInstance.htmlPluginState),this.htmlVideoLayerInstance.update(this.props.cldVid,this.props.sources,this.props.plugins,this.getVideoAttributes(),this.props.cldPoster)},t.prototype.componentWillUnmount=function(){ut(this.htmlVideoLayerInstance.htmlPluginState)},t.prototype.getVideoAttributes=function(){var r=this,n={};return Qs.forEach(function(o){o in r.props&&(n[o]=r.props[o])}),n},t.prototype.attachRef=function(r){this.videoRef.current=r;var n=this.props.innerRef;n&&(n instanceof Function?n(r):n.current=r)},t.prototype.render=function(){var r=this.props;r.cldVid,r.cldPoster,r.plugins,r.sources,r.innerRef,r.useFetchFormat;var n=Yr(r,["cldVid","cldPoster","plugins","sources","innerRef","useFetchFormat"]);return B.createElement("video",J({},n,{ref:this.attachRef}))},t})(ct.exports.Component);function Us(e){return!(typeof e!="object"||e instanceof Array)}class qs{filterOutNonSupportedKeys(t,r){const n=Object.create({});return Us(t)?(Object.keys(t).forEach(o=>{r.indexOf(o)>=0?n[o]=t[o]:console.warn("Warning - unsupported key provided to configuration: ",o)}),n):Object.create({})}}const ar=["cname","secureDistribution","privateCdn","signUrl","longUrlSignature","shorten","useRootPath","secure","forceVersion","analytics","queryParams"];class se extends qs{constructor(t){super();const r=this.filterOutNonSupportedKeys(t,ar);Object.assign(this,{secure:!0},r)}extend(t){const r=this.filterOutNonSupportedKeys(t,ar);return new se(Object.assign({},this,r))}setCname(t){return this.cname=t,this}setSecureDistribution(t){return this.secureDistribution=t,this}setPrivateCdn(t){return this.privateCdn=t,this}setSignUrl(t){return this.signUrl=t,this}setLongUrlSignature(t){return this.longUrlSignature=t,this}setShorten(t){return this.shorten=t,this}setUseRootPath(t){return this.useRootPath=t,this}setSecure(t){return this.secure=t,this}setForceVersion(t){return this.forceVersion=t,this}setQueryParams(t){return this.queryParams=t,this}}class H{constructor(t){this.values=[],this.delimiter=":",this.hasValue(t)&&this.addValue(t)}toString(){return this.values.join(this.delimiter)}hasValue(t){return typeof t<"u"&&t!==null&&t!==""}addValue(t){return Array.isArray(t)?this.values=this.values.concat(t):this.values.push(t),this.values=this.values.filter(r=>this.hasValue(r)),this}setDelimiter(t){return this.delimiter=t,this}}class Bs extends Error{constructor(t="Unsupported"){super(t)}}function ae(e){return new Bs(e)}function Gs(){return this._qualifierModel||{error:ae(`unsupported qualifier ${this.constructor.name}`)}}class Ns{constructor(){this._qualifierModel={}}toJson(){return Gs.apply(this)}}class vt extends Ns{constructor(t,r){super(),this.delimiter="_",this.key=t,r instanceof H?this.qualifierValue=r:(this.qualifierValue=new H,this.qualifierValue.addValue(r))}toString(){const{key:t,delimiter:r,qualifierValue:n}=this;return`${t}${r}${n.toString()}`}addValue(t){return this.qualifierValue.addValue(t),this}}class j extends vt{constructor(t,r){let n;r?n=new H([t,`${r}`]).setDelimiter(":"):n=t,super("fl",n),this.flagValue=r}toString(){return super.toString().replace(/\./g,"%2E")}getFlagValue(){return this.flagValue}}function zs(e,t){const r=Array.from(e.entries());return t.forEach(n=>{r.push(["fl",n])}),r.sort().map(n=>n[1])}function Js(){var e,t,r;const n=this._actionModel&&Object.keys(this._actionModel).length,o=(r=(t=(e=this._actionModel)===null||e===void 0?void 0:e.source)===null||t===void 0?void 0:t.transformation)===null||r===void 0?void 0:r.error;return o&&o instanceof Error?{error:o}:n?this._actionModel:{error:ae(`unsupported action ${this.constructor.name}`)}}class Hs{constructor(){this._actionModel={}}toJson(){return Js.apply(this)}}class ue extends Hs{constructor(){super(...arguments),this.qualifiers=new Map,this.flags=[],this.delimiter=",",this.actionTag=""}prepareQualifiers(){}getActionTag(){return this.actionTag}setActionTag(t){return this.actionTag=t,this}toString(){return this.prepareQualifiers(),zs(this.qualifiers,this.flags).join(this.delimiter)}addQualifier(t){if(typeof t=="string"){const[r,n]=t.toLowerCase().split("_");r==="fl"?this.flags.push(new j(n)):this.qualifiers.set(r,new vt(r,n))}else this.qualifiers.set(t.key,t);return this}addFlag(t){return typeof t=="string"?this.flags.push(new j(t)):t instanceof j&&this.flags.push(t),this}addValueToQualifier(t,r){return this.qualifiers.get(t).addValue(r),this}}function Ys(e){return e&&(e.match(/^#/)?`rgb:${e.substr(1)}`:e)}class Ws extends ue{constructor(t){super(),this._actionModel={},this.addQualifier(new vt("b",new H(Ys(t)).setDelimiter("_"))),this._actionModel.color=t,this._actionModel.actionType="backgroundColor"}static fromJson(t){const{color:r}=t;return new this(r)}}class ur{constructor(t){this.raw=t}toString(){return this.raw}toJson(){return{error:ae(`unsupported action ${this.constructor.name}`)}}}function Ks(e){const t=e;return"error"in t&&!!t.error}function Xs(){return new j("lossy")}function Zs(){return new j("preserve_transparency")}function ta(e){return new j("progressive",e)}class ea extends H{constructor(t){super(t),this.val=t}getValue(){return this.val}}function k(e){const t={};return Object.keys(e).forEach(r=>{t[e[r]]=r}),t}const ra={limitFit:"limit",limitFill:"lfill",minimumFit:"mfit",thumbnail:"thumb",limitPad:"lpad",minimumPad:"mpad",autoPad:"auto_pad"},na={colorSpace:"cs",dpr:"dpr",density:"dn",defaultImage:"d",format:"f",quality:"q"},ia={redEye:"redeye",advancedRedEye:"adv_redeye",oilPaint:"oil_paint",unsharpMask:"unsharp_mask",makeTransparent:"make_transparent",generativeRestore:"gen_restore",upscale:"upscale"},oa={autoBest:"auto:best",autoEco:"auto:eco",autoGood:"auto:good",autoLow:"auto:low",jpegminiHigh:"jpegmini:1",jpegminiMedium:"jpegmini:2",jpegminiBest:"jpegmini:0"},sa={fullHd:"full_hd",fullHdWifi:"full_hd_wifi",fullHdLean:"full_hd_lean",hdLean:"hd_lean"},aa={444:"CHROMA_444",420:"CHROMA_420"},ua={noCmyk:"no_cmyk",keepCmyk:"keep_cmyk",tinySrgb:"tinysrgb",srgbTrueColor:"srgb:truecolor"};k(aa);k(ua);k(ra);const ca=k(na);k(ia);k(oa);k(sa);class la extends ue{constructor(t,r,n){super(),this._actionModel={};let o;r instanceof ea?o=r.getValue():o=r,this._actionModel.actionType=ca[t],this._actionModel[n]=o,this.addQualifier(new vt(t,r))}}class fa extends j{constructor(t){super("progressive",t)}}class ft extends la{constructor(t,r){super(t,r,"formatType")}lossy(){return this._actionModel.lossy=!0,this.addFlag(Xs()),this}progressive(t){return t instanceof fa?(this._actionModel.progressive={mode:t.getFlagValue()},this.addFlag(t)):(this._actionModel.progressive={mode:t},this.addFlag(ta(t))),this}preserveTransparency(){return this._actionModel.preserveTransparency=!0,this.addFlag(Zs()),this}static fromJson(t){const{formatType:r,lossy:n,progressive:o,preserveTransparency:s}=t;let c;return r?c=new this("f",r):c=new this("f"),o&&(o.mode?c.progressive(o.mode):c.progressive()),n&&c.lossy(),s&&c.preserveTransparency(),c}}class wt{constructor(){this.actions=[]}addAction(t){let r;if(typeof t=="string"){if(t.indexOf("/")>=0)throw"addAction cannot accept a string with a forward slash in it - /, use .addTransformation() instead";r=new ur(t)}else r=t;return this.actions.push(r),this}addTransformation(t){return t instanceof wt?this.actions=this.actions.concat(t.actions):this.actions.push(new ur(t)),this}toString(){return this.actions.map(t=>t.toString()).filter(t=>t).join("/")}animated(t){return this.addAction(t)}border(t){return this.addAction(t)}reshape(t){return this.addAction(t)}resize(t){return this.addAction(t)}quality(t){return this.addAction(new ft("q",t)),this}format(t){return this.addAction(new ft("f",t)),this}roundCorners(t){return this.addAction(t)}overlay(t){return this.addAction(t)}underlay(t){return t.setLayerType("u"),this.addAction(t)}addVariable(t){return this.addAction(t)}conditional(t){return this.addAction(t)}effect(t){return this.addAction(t)}adjust(t){return this.addAction(t)}rotate(t){return this.addAction(t)}namedTransformation(t){return this.addAction(t)}delivery(t){return this.addAction(t)}backgroundColor(t){return this.addAction(new Ws(t))}psdTools(t){return this.addAction(t)}extract(t){return this.addAction(t)}addFlag(t){const r=new ue;let n=t;return typeof t=="string"&&(n=new j(t)),r.addQualifier(n),this.addAction(r)}customFunction(t){return this.addAction(t)}transcode(t){return this.addAction(t)}videoEdit(t){return this.addAction(t)}toJson(){const t=[];for(const r of this.actions){const n=r.toJson();if(Ks(n))return n;t.push(n)}return{actions:t}}}class da extends wt{}class ha extends wt{}function pa(e){return e.match(/^https?:\//)}function ga(e){return e.indexOf("/")<0}function ya(e){return e.match(/^v[0-9]+/)}function ma(e,t){const r=t.secure,n=t.privateCdn,o=t.cname,s=t.secureDistribution;return!r&&!o?`http://res.cloudinary.com/${e}`:r&&!s&&n?`https://${e}-res.cloudinary.com`:r&&!s?`https://res.cloudinary.com/${e}`:r&&s&&n?`https://${s}`:r&&s?`https://${s}/${e}`:!r&&o?`http://${o}/${e}`:"ERROR"}function _a(e){return e||"image"}function va(e){return e||"upload"}function wa(e,t,r){const n=r!==!1;return t?`v${t}`:ya(e)||pa(e)||ga(e)?"":n?"v1":""}function ce(e,t,r){let n=t>>0,o=String(r);return e.length>n?String(e):(n=n-e.length,n>o.length&&(o+=ba(o,n/o.length)),o.slice(0,n)+String(e))}function ba(e,t){let r=t,n="";for(;r>0;)n+=e,r--;return n}const Aa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dt={};let cr=0;Aa.split("").forEach(e=>{let t=cr.toString(2);t=ce(t,6,"0"),dt[t]=e,cr++});function Oa(e){if(e.split(".").length<2)throw new Error("invalid semVer, must have at least two segments");return e.split(".").reverse().join(".")}function Ta(e){if(e.split(".").length<2)throw new Error("invalid semVer, must have at least two segments");return e.split(".").map(t=>{const r=+t;if(isNaN(r)||r<0)throw"Invalid version number provided";return ce(t,2,"0")}).join(".")}function lr(e){let t="";const n=e.split(".").length*6,o=Oa(e),s=Ta(o);let l=parseInt(s.split(".").join("")).toString(2);if(l=ce(l,n,"0"),l.length%6!==0)throw"Version must be smaller than 43.21.26)";return l.match(/.{1,6}/g).forEach(h=>{t+=dt[h]}),t}function Sa(e){const t={sdkSemver:e.sdkSemver,techVersion:e.techVersion,sdkCode:e.sdkCode,product:e.product,feature:"0",osType:e.osType,osVersion:e.osVersion};return e.accessibility&&(t.feature="D"),e.lazyload&&(t.feature="C"),e.responsive&&(t.feature="A"),e.placeholder&&(t.feature="B"),t}const Ea="1.20.0";function Ca(e){const[t,r]=e.split("."),n=parseInt(t).toString(2),o=parseInt(r).toString(2),s=n.padStart(6,"0"),c=o.padStart(6,"0");return dt[s]+dt[c]}function xa(){const e="0.0.0";if(typeof window<"u")return e;try{return process.versions.node||e}catch{return e}}function Ma(e){const t={techVersion:xa(),sdkCode:"T",sdkSemver:Ea.split("-")[0],product:"A",osType:"Z",osVersion:"0.0",responsive:!1,placeholder:!1,lazyload:!1,accessibility:!1};return e?Object.assign(Object.assign({},t),e):t}function fr(e){const t=Ma(e),r=Sa(t);try{const n=$a(r.techVersion),o=lr(r.sdkSemver),s=lr(n),c=Ca(r.osVersion),l=r.feature,h=r.sdkCode,{product:f,osType:g}=r;return`D${f}${h}${o}${s}${g}${c}${l}`}catch{return"E"}}function $a(e){const t=e.split(".");return`${t[0]}.${t[1]}`}const dr={"image/upload":"images","image/private":"private_images","image/authenticated":"authenticated_images","raw/upload":"files","video/upload":"videos"};class Pa{constructor(t,r={},n){this.setPublicID(t),this.setCloudConfig(r),this.setURLConfig(n)}setURLConfig(t){return this.urlConfig=new se(t),this}setCloudConfig(t){return this.cloudName=t.cloudName,this.apiKey=t.apiKey,this.apiSecret=t.apiSecret,this.authToken=t.authToken,this}setPublicID(t){return this.publicID=t?t.toString():"",this}setDeliveryType(t){return this.deliveryType=t,this}setSuffix(t){return this.suffix=t,this}setSignature(t){return this.signature=t,this}setVersion(t){return t&&(this.version=t),this}setAssetType(t){return t&&(this.assetType=t),this}sign(){return this}toURL(t={}){return this.createCloudinaryURL(null,t.trackedAnalytics)}validateAssetForURLCreation(){if(typeof this.cloudName>"u")throw"You must supply a cloudName when initializing the asset";const t=this.suffix&&this.suffix.indexOf(".")>=0,r=this.suffix&&this.suffix.indexOf("/")>=0;if(t||r)throw"`suffix`` should not include . or /"}getResourceType(){const t=_a(this.assetType),r=va(this.deliveryType),n=!!this.suffix,o=`${t}/${r}`,s=dr[`${t}/${r}`],c=this.urlConfig.useRootPath,l=this.urlConfig.shorten;if(c){if(o==="image/upload")return"";throw new Error(`useRootPath can only be used with assetType: 'image' and deliveryType: 'upload'. Provided: ${o} instead`)}if(l&&o==="image/upload")return"iu";if(n){if(s)return s;throw new Error(`URL Suffix only supported for ${Object.keys(dr).join(", ")}, Provided: ${o} instead`)}return o}getSignature(){return this.signature?`s--${this.signature}--`:""}createCloudinaryURL(t,r){if(!this.publicID)return"";this.validateAssetForURLCreation();const n=ma(this.cloudName,this.urlConfig),o=t?t.toString():"",s=wa(this.publicID,this.version,this.urlConfig.forceVersion),c=this.publicID;if(typeof t=="string")return[n,this.getResourceType(),this.getSignature(),o,s,c.replace(/,/g,"%2C"),this.suffix].filter(h=>h).join("/");{const l=[encodeURI(n),this.getResourceType(),this.getSignature(),encodeURI(o),s,encodeURI(c).replace(/,/g,"%2C"),this.suffix&&encodeURI(this.suffix)].filter(g=>g).join("/").replace(/\?/g,"%3F").replace(/=/g,"%3D"),h=this.urlConfig.analytics!==!1&&!c.includes("?");let f="";if(typeof this.urlConfig.queryParams=="object")try{const g=new URLSearchParams(this.urlConfig.queryParams);h&&g.set("_a",fr(r)),f=g.toString()}catch{console.error("Error: URLSearchParams is not available so the queryParams object cannot be parsed, please try passing as an already parsed string")}else f=this.urlConfig.queryParams||"",h&&(f+=`${f.length>0?"&":""}_a=${fr(r)}`);return f?`${l}?${f}`:l}}}class an extends Pa{constructor(t,r,n,o){super(t,r,n),this.transformation=o}animated(t){return this.transformation.animated(t),this}border(t){return this.transformation.border(t),this}reshape(t){return this.transformation.reshape(t),this}resize(t){return this.transformation.resize(t),this}quality(t){return this.addAction(new ft("q",t)),this}format(t){return this.addAction(new ft("f",t)),this}roundCorners(t){return this.transformation.roundCorners(t),this}overlay(t){return this.transformation.overlay(t),this}addVariable(t){return this.transformation.addVariable(t),this}conditional(t){return this.transformation.conditional(t),this}effect(t){return this.transformation.effect(t),this}adjust(t){return this.transformation.adjust(t),this}rotate(t){return this.transformation.rotate(t),this}namedTransformation(t){return this.transformation.namedTransformation(t),this}delivery(t){return this.transformation.delivery(t),this}backgroundColor(t){return this.transformation.backgroundColor(t),this}psdTools(t){return this.transformation.psdTools(t),this}extract(t){return this.transformation.extract(t),this}addFlag(t){return this.transformation.addFlag(t),this}customFunction(t){return this.transformation.customFunction(t),this}addAction(t){return this.transformation.addAction(t),this}addTransformation(t){return this.transformation.addTransformation(t),this}toString(){return this.transformation.toString()}underlay(t){return this.transformation.underlay(t),this}toURL(t={}){return this.createCloudinaryURL(this.transformation,t==null?void 0:t.trackedAnalytics)}}class ja extends an{constructor(t,r,n){super(t,r,n,new da)}}class Ra extends an{constructor(t,r,n){super(t,r,n,new ha),this.assetType="video"}transcode(t){return this.transformation.transcode(t),this}videoEdit(t){return this.transformation.videoEdit(t),this}}class Wa{constructor(t){t&&(this.cloudinaryConfig=t)}image(t){return new ja(t,this.cloudinaryConfig.cloud,this.cloudinaryConfig.url)}video(t){return new Ra(t,this.cloudinaryConfig.cloud,this.cloudinaryConfig.url)}setConfig(t){return this.cloudinaryConfig=t,this}getConfig(){return this.cloudinaryConfig}extendConfig(){}}export{Ya as A,Wa as C,Ja as l,Ha as p};
